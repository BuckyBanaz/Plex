import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';
import 'package:get/get_core/src/get_main.dart';



// eng_json (English)
const Map<String, dynamic> eng_json = {
  "terms_title": "User Terms & Conditions",
  "privacy_title": "User Privacy Policy",
  "terms": [
    {
      "heading": "1. Eligibility",
      "body": "Users must provide a valid national ID or residency permit when required and must be at least the minimum age required by law to use the services."
    },
    {
      "heading": "2. Account Responsibility",
      "body": "Users are responsible for maintaining the confidentiality of their account credentials and for all activity under their account. Sharing accounts is prohibited unless expressly allowed."
    },
    {
      "heading": "3. Use of Service",
      "body": "Users agree to use the platform for lawful purposes only and to follow instructions provided by the app and the service provider. Any misuse, fraud, or abuse may lead to suspension or termination."
    },
    {
      "heading": "4. Payments & Fees",
      "body": "All payments for services are processed through approved payment channels. Fees, refunds, and any applicable taxes will be handled according to our payment policy."
    },
    {
      "heading": "5. Cancellations & Refunds",
      "body": "Cancellation rules and refund eligibility vary by service type and will be displayed at the time of booking. Repeated cancellations may affect your ability to use the platform."
    },
    {
      "heading": "6. Liability",
      "body": "The company is not liable for indirect or consequential damages. Users are expected to follow local laws and take reasonable precautions when using services."
    },
    {
      "heading": "7. Suspension & Termination",
      "body": "We may suspend or terminate user accounts for policy violations, fraud, or illegal activity. Users can appeal decisions through the in-app support channel."
    },
    {
      "heading": "8. Acceptance",
      "body": "By continuing to use the app, you accept these Terms & Conditions in full."
    }
  ],

  "privacy": [
    {
      "heading": "1. Data Collected",
      "body": "We collect personal information such as name, contact details, payment information, device information, and optionally profile data. We may also collect location data when you use location-based features."
    },
    {
      "heading": "2. Purpose of Collection",
      "body": "Data is collected to provide the service, verify identity, process payments, improve the product, and for fraud prevention and safety."
    },
    {
      "heading": "3. Data Sharing",
      "body": "We may share data with service providers, payment processors, and legal authorities when required by law. We do not sell personal data to third parties."
    },
    {
      "heading": "4. Security",
      "body": "We use industry-standard encryption and access controls to protect your data. Only authorized personnel may access personal data."
    },
    {
      "heading": "5. User Rights",
      "body": "Users can request access, correction, or deletion of their data subject to legal and operational constraints. Requests can be made through the app."
    },
    {
      "heading": "6. GPS & Location",
      "body": "Location is used only for providing location-based services, tracking active orders, routing, and safety. Location tracking can be controlled via app permissions."
    },
    {
      "heading": "7. Retention",
      "body": "We retain personal data only as long as necessary for legal obligations, financial records, and safety/compliance purposes."
    },
    {
      "heading": "8. Policy Updates",
      "body": "We may update this policy. Users will be notified of significant changes via the app."
    }
  ]
};


// ar_json (Arabic)
const Map<String, dynamic> ar_json = {
  "terms_title": "شروط وأحكام المستخدم",
  "privacy_title": "سياسة خصوصية المستخدم",
  "terms": [
    {
      "heading": "1. الأهلية",
      "body": "يجب على المستخدمين تقديم بطاقة هوية وطنية صالحة أو تصريح إقامة عند الطلب ويجب أن يكونوا على الأقل بالسن الأدنى المسموح به قانونيًا لاستخدام الخدمات."
    },
    {
      "heading": "2. مسؤولية الحساب",
      "body": "المستخدمون مسؤولون عن الحفاظ على سرية بيانات اعتماد حسابهم وعن جميع الأنشطة التي تتم تحت حسابهم. مشاركة الحسابات محظورة إلا إذا سمح بذلك صراحة."
    },
    {
      "heading": "3. استخدام الخدمة",
      "body": "يوافق المستخدمون على استخدام المنصة لأغراض قانونية فقط واتباع التعليمات المقدمة من التطبيق ومقدم الخدمة. أي إساءة استخدام أو احتيال قد تؤدي إلى تعليق أو إنهاء الخدمة."
    },
    {
      "heading": "4. المدفوعات والرسوم",
      "body": "تتم معالجة جميع المدفوعات من خلال قنوات الدفع المعتمدة. سيتم التعامل مع الرسوم والاستردادات وأي ضرائب طبقًا لسياسة الدفع لدينا."
    },
    {
      "heading": "5. الإلغاءات والاسترداد",
      "body": "تختلف قواعد الإلغاء وأهلية الاسترداد حسب نوع الخدمة وستظهر عند الحجز. قد تؤثر الإلغاءات المتكررة على قدرتك على استخدام المنصة."
    },
    {
      "heading": "6. المسؤولية",
      "body": "الشركة غير مسؤولة عن الأضرار غير المباشرة أو التبعية. يُتوقع من المستخدمين اتباع القوانين المحلية واتخاذ الاحتياطات المعقولة عند استخدام الخدمات."
    },
    {
      "heading": "7. التعليق والإنهاء",
      "body": "يجوز لنا تعليق أو إنهاء حسابات المستخدمين عند انتهاك السياسات أو الاحتيال أو النشاط غير القانوني. يمكن للمستخدمين استئناف القرارات من خلال دعم التطبيق."
    },
    {
      "heading": "8. القبول",
      "body": "باستمرارك في استخدام التطبيق، فإنك تقبل هذه الشروط والأحكام كاملة."
    }
  ],

  "privacy": [
    {
      "heading": "1. البيانات التي نجمعها",
      "body": "نقوم بجمع معلومات شخصية مثل الاسم وتفاصيل الاتصال ومعلومات الدفع ومعلومات الجهاز وبيانات الملف الشخصي الاختيارية. قد نجمع أيضًا بيانات الموقع عند استخدام ميزات الموقع."
    },
    {
      "heading": "2. غرض الجمع",
      "body": "تُجمع البيانات لتقديم الخدمة والتحقق من الهوية ومعالجة المدفوعات وتحسين المنتج ولمنع الاحتيال وضمان السلامة."
    },
    {
      "heading": "3. مشاركة البيانات",
      "body": "قد نشارك البيانات مع مزودي الخدمة ومعالجي الدفع والسلطات القانونية عند الاقتضاء. نحن لا نبيع البيانات الشخصية لأطراف ثالثة."
    },
    {
      "heading": "4. الأمن",
      "body": "نستخدم تشفيرًا ومعايير وصول على مستوى الصناعة لحماية بياناتك. لا يُسمح إلا للأشخاص المصرح لهم بالوصول إلى البيانات الشخصية."
    },
    {
      "heading": "5. حقوق المستخدم",
      "body": "يمكن للمستخدمين طلب الوصول إلى بياناتهم أو تصحيحها أو حذفها مع مراعاة القيود القانونية والتشغيلية. يمكن تقديم الطلبات عبر التطبيق."
    },
    {
      "heading": "6. نظام تحديد المواقع والموقع",
      "body": "يُستخدم الموقع فقط لتقديم خدمات الموقع وتتبع الطلبات النشطة والتوجيه والسلامة. يمكن التحكم في تتبع الموقع عبر صلاحيات التطبيق."
    },
    {
      "heading": "7. الاحتفاظ",
      "body": "نحتفظ بالبيانات الشخصية فقط للمدة اللازمة للالتزامات القانونية والسجلات المالية وأغراض السلامة والامتثال."
    },
    {
      "heading": "8. تحديثات السياسة",
      "body": "قد نقوم بتحديث هذه السياسة. سيتم إخطار المستخدمين بالتغييرات المهمة عبر التطبيق."
    }
  ]
};

const Map<String, dynamic> driver_eng_json = {
  "terms_title": "Driver Terms & Conditions",
  "privacy_title": "Driver Privacy Policy",
  "terms": [
    {
      "heading": "1. Driver Eligibility",
      "body": "Drivers must hold a valid driving license, national ID, and pass company background checks and onboarding verification."
    },
    {
      "heading": "2. Vehicle Requirements",
      "body": "Vehicles must meet safety & inspection standards, valid insurance, and registration. Vehicle types must comply with service categories."
    },
    {
      "heading": "3. Driver Responsibilities",
      "body": "Maintain professional behavior, follow traffic rules, complete deliveries on time, report incidents immediately, and keep app active during shifts."
    },
    {
      "heading": "4. Prohibited Actions",
      "body": "No tampering with orders, no account sharing, no fraudulent confirmations, and no use of unauthorized vehicles."
    },
    {
      "heading": "5. Payments & Earnings",
      "body": "Earnings are processed via approved channels. Deductions (penalties, damage fees) may be applied when applicable."
    },
    {
      "heading": "6. Suspension & Termination",
      "body": "Accounts may be suspended or terminated for safety violations, fraud, harassment, repeated poor performance, or policy breaches."
    },
    {
      "heading": "7. Liability",
      "body": "Drivers are responsible for their vehicle safety and for goods during transport; they must comply with relevant laws and regulations."
    },
    {
      "heading": "8. Acceptance",
      "body": "By using the Driver App, you acknowledge and accept these terms."
    }
  ],
  "privacy": [
    {
      "heading": "1. Data Collected",
      "body": "We collect identity, contact, vehicle documents, real-time GPS while on delivery, ratings, and device info for security."
    },
    {
      "heading": "2. Purpose",
      "body": "To verify identity, assign orders, track deliveries, ensure compliance, process payments, and improve service safety."
    },
    {
      "heading": "3. Sharing",
      "body": "Data may be shared with authorities, insurers, payment processors, and internal compliance teams when required."
    },
    {
      "heading": "4. Security & Retention",
      "body": "Data is encrypted and accessed only by authorized personnel. Retained as needed for legal, financial, and safety reasons."
    },
    {
      "heading": "5. Driver Rights",
      "body": "Drivers can request access, correction, or deletion (subject to legal obligations) via in-app support."
    },
    {
      "heading": "6. GPS Tracking",
      "body": "GPS tracking occurs during active deliveries for routing, safety, and fraud prevention."
    },
    {
      "heading": "7. Policy Changes",
      "body": "We may update this policy; drivers will be notified of significant changes via the app."
    }
  ]
};

// driver_ar_json (Arabic)
const Map<String, dynamic> driver_ar_json = {
  "terms_title": "شروط وأحكام السائق",
  "privacy_title": "سياسة خصوصية السائق",
  "terms": [
    {
      "heading": "1. أهلية السائق",
      "body": "يجب أن يكون لدى السائقين رخصة قيادة سارية وبطاقة هوية واجتياز فحوصات الخلفية والتوثيق."
    },
    {
      "heading": "2. متطلبات المركبة",
      "body": "يجب أن تفي المركبات بمعايير السلامة والفحص وأن تكون مؤمنة ومسجلة بشكل صحيح."
    },
    {
      "heading": "3. مسؤوليات السائق",
      "body": "الحفاظ على السلوك المهني، اتباع قوانين المرور، إكمال التسليمات في الوقت المناسب، والإبلاغ عن الحوادث فورًا."
    },
    {
      "heading": "4. الإجراءات المحظورة",
      "body": "لا يسمح بالتلاعب بالطلبات أو مشاركة الحساب أو تأكيدات احتيالية أو استخدام مركبات غير مصرح بها."
    },
    {
      "heading": "5. المدفوعات والأرباح",
      "body": "تتم معالجة الأرباح عبر قنوات معتمدة وقد يتم تطبيق خصومات عند الاقتضاء."
    },
    {
      "heading": "6. الإيقاف والإنهاء",
      "body": "يجوز تعليق الحساب أو إنهاؤه عند انتهاك السلامة أو الاحتيال أو السلوك غير المقبول."
    },
    {
      "heading": "7. المسؤولية",
      "body": "السائقون مسؤولون عن سلامة مركباتهم والبضائع أثناء النقل ويجب عليهم الامتثال للقوانين."
    },
    {
      "heading": "8. القبول",
      "body": "باستخدام تطبيق السائق، فإنك تقبل هذه الشروط."
    }
  ],
  "privacy": [
    {
      "heading": "1. البيانات التي نجمعها",
      "body": "نقوم بجمع الهوية وتفاصيل الاتصال وأوراق المركبة والموقع في الوقت الفعلي والتقييمات ومعلومات الجهاز."
    },
    {
      "heading": "2. الغرض",
      "body": "للتحقق من الهوية وتعيين الطلبات وتتبع التسليمات ومعالجة المدفوعات وتحسين السلامة."
    },
    {
      "heading": "3. المشاركة",
      "body": "قد تتم مشاركة البيانات مع السلطات وشركات التأمين ومعالجي الدفع وفِرق الامتثال الداخلية عند الحاجة."
    },
    {
      "heading": "4. الأمان والاحتفاظ",
      "body": "يتم تشفير البيانات ويصل إليها المخولون فقط. نحتفظ بالبيانات حسب الضرورة لأغراض قانونية ومالية وسلامة."
    },
    {
      "heading": "5. حقوق السائق",
      "body": "يمكن للسائقين طلب الوصول أو التصحيح أو الحذف (وفقًا للالتزامات القانونية) عبر دعم التطبيق."
    },
    {
      "heading": "6. تتبع GPS",
      "body": "يتم تتبع GPS أثناء التسليمات النشطة للتوجيه والسلامة ومنع الاحتيال."
    },
    {
      "heading": "7. تغييرات السياسة",
      "body": "قد نقوم بتحديث السياسة وسنخطر السائقين بالتغييرات المهمة عبر التطبيق."
    }
  ]
};
/*
  Flutter (Dart) modular screens (single-file example)
  - PolicyScreen: reusable widget that displays a policy (terms or privacy) from a Map
  - SectionWidget: small reusable component for each section
  - Example usage: two routes for "UserTermsScreen" and "UserPrivacyScreen"

  Note: Integrate this file into your existing app. Replace localization loader with your preferred approach
*/


// Replace Card-based widget with this Container-based one
class SectionItem extends StatelessWidget {
  final String heading;
  final String body;
  const SectionItem({Key? key, required this.heading, required this.body}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final textTheme = Theme.of(context).textTheme;
    return Container(
      margin: const EdgeInsets.symmetric(vertical: 6),
      padding: const EdgeInsets.all(14),
      decoration: BoxDecoration(
        color: Colors.white,
        borderRadius: BorderRadius.circular(12),
        border: Border.all(color: Colors.grey.withOpacity(0.15)),
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.04),
            blurRadius: 10,
            offset: const Offset(0, 4),
          ),
        ],
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          // Heading (bold)
          Text(
            heading,
            style: textTheme.titleMedium?.copyWith(fontWeight: FontWeight.w700),
          ),
          const SizedBox(height: 8),
          // Body (wrap & selectable if needed)
          Text(
            body,
            style: textTheme.bodyMedium?.copyWith(height: 1.4),
          ),
        ],
      ),
    );
  }
}

class PolicyScreen extends StatelessWidget {
  final String title;
  final List<Map<String, String>> sections;

  const PolicyScreen({Key? key, required this.title, required this.sections}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    // Use app locale for direction if needed (Get.locale)
    final localeCode = Get.locale?.languageCode ?? 'en';
    return Directionality(
      textDirection: localeCode == 'ar' ? TextDirection.rtl : TextDirection.ltr,
      child: Scaffold(
        appBar: AppBar(
          title: Text(title),
          centerTitle: true,
          elevation: 0,
          backgroundColor: Colors.white,
          foregroundColor: Colors.black87,
          leading: IconButton(
            icon: const Icon(CupertinoIcons.back),
            onPressed: () => Get.back(),
          ),
        ),
        backgroundColor: const Color(0xFFF6F7F9), // subtle off-white background like screenshots
        body: SafeArea(
          child: Padding(
            padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
            child: ListView.builder(
              itemCount: sections.length,
              physics: const BouncingScrollPhysics(),
              itemBuilder: (context, index) {
                final item = sections[index];
                return SectionItem(
                  heading: item['heading'] ?? '',
                  body: item['body'] ?? '',
                );
              },
            ),
          ),
        ),
      ),
    );
  }
}

// Wrapper screens that auto pick locale map (drop-in)
class UserTermsScreen extends StatelessWidget {
  const UserTermsScreen({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final localeCode = Get.locale?.languageCode ?? 'en';
    final map = localeCode == 'ar' ? ar_json : eng_json;

    final title = map['terms_title'] as String? ?? 'Terms';
    final sections = List<Map<String, String>>.from(map['terms'] as List);

    return PolicyScreen(title: title, sections: sections);
  }
}

class UserPrivacyScreen extends StatelessWidget {
  const UserPrivacyScreen({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final localeCode = Get.locale?.languageCode ?? 'en';
    final map = localeCode == 'ar' ? ar_json : eng_json;

    final title = map['privacy_title'] as String? ?? 'Privacy Policy';
    final sections = List<Map<String, String>>.from(map['privacy'] as List);

    return PolicyScreen(title: title, sections: sections);
  }
}

// DriverTermsScreen
class DriverTermsScreen extends StatelessWidget {
  const DriverTermsScreen({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final localeCode = Get.locale?.languageCode ?? 'en';
    final map = localeCode == 'ar' ? driver_ar_json : driver_eng_json;

    final title = map['terms_title'] as String? ?? 'Driver Terms';
    final sections = List<Map<String, String>>.from(map['terms'] as List);

    return PolicyScreen(title: title, sections: sections); // reuses your PolicyScreen
  }
}

// DriverPrivacyScreen
class DriverPrivacyScreen extends StatelessWidget {
  const DriverPrivacyScreen({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    final localeCode = Get.locale?.languageCode ?? 'en';
    final map = localeCode == 'ar' ? driver_ar_json : driver_eng_json;

    final title = map['privacy_title'] as String? ?? 'Driver Privacy Policy';
    final sections = List<Map<String, String>>.from(map['privacy'] as List);

    return PolicyScreen(title: title, sections: sections);
  }
}
